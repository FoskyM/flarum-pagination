{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@foskym/flarum-pagination/webpack/bootstrap","webpack://@foskym/flarum-pagination/webpack/runtime/compat get default export","webpack://@foskym/flarum-pagination/webpack/runtime/define property getters","webpack://@foskym/flarum-pagination/webpack/runtime/hasOwnProperty shorthand","webpack://@foskym/flarum-pagination/webpack/runtime/make namespace object","webpack://@foskym/flarum-pagination/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/app']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['extend']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['forum/states/DiscussionListState']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/components/Button']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['forum/app']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/extend']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@foskym/flarum-pagination/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@foskym/flarum-pagination/external root \"flarum.core.compat['common/Component']\"","webpack://@foskym/flarum-pagination/./src/forum/components/Toolbar.tsx","webpack://@foskym/flarum-pagination/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@foskym/flarum-pagination/./src/forum/index.js","webpack://@foskym/flarum-pagination/./src/forum/addUserPreference.ts","webpack://@foskym/flarum-pagination/./src/forum/determineMode.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/DiscussionListState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionListItem'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from 'flarum/common/Component';\r\nimport Button from 'flarum/common/components/Button';\r\nimport type Mithril from 'mithril';\r\n\r\nexport default class Toolbar extends Component {\r\n  attrs: any;\r\n  view(vnode: Mithril.Vnode) {\r\n    let state = this.attrs.state;\r\n    return (\r\n      <div className=\"Pagination\">\r\n        <ul class=\"IndexPage-toolbar-view\">\r\n          <li>{this.buttonFirst()}</li>\r\n          <li>{this.buttonBack()}</li>\r\n          {state.ctrl.pageList().map((page: any) => {\r\n            return (\r\n              <li>\r\n                <Button\r\n                  title={page}\r\n                  className={state.page().number == page ? 'Button Button--primary Button--active' : 'Button'}\r\n                  onclick={() => {\r\n                    state.ctrl.toPage(page);\r\n                  }}\r\n                >\r\n                  {page}\r\n                </Button>\r\n              </li>\r\n            );\r\n          })}\r\n          <li>{this.buttonNext()}</li>\r\n          <li>{this.buttonLast()}</li>\r\n          <li>{this.inputJump()}</li>\r\n          <li>{this.buttonJump()}</li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  buttonFirst() {\r\n    let state = this.attrs.state;\r\n    return Button.component({\r\n      title: 'First',\r\n      icon: 'fa fa-angle-double-left',\r\n      className: 'Button Button--icon',\r\n      onclick: () => {\r\n        state.ctrl.toPage(1);\r\n      },\r\n      disabled: state.page().number == 1,\r\n    });\r\n  }\r\n\r\n  buttonBack() {\r\n    let state = this.attrs.state;\r\n    return Button.component({\r\n      title: 'Back',\r\n      icon: 'fa fa-angle-left',\r\n      className: 'Button Button--icon',\r\n      onclick: () => {\r\n        let page = state.page().number;\r\n        state.ctrl.toPage(parseInt(page) - 1);\r\n      },\r\n      disabled: state.page().number == 1,\r\n    });\r\n  }\r\n\r\n  buttonNext() {\r\n    let state = this.attrs.state;\r\n    return Button.component({\r\n      title: 'Next',\r\n      icon: 'fa fa-angle-right',\r\n      className: 'Button Button--icon',\r\n      onclick: () => {\r\n        let page = state.page().number;\r\n        state.ctrl.toPage(parseInt(page) + 1);\r\n      },\r\n      disabled: state.page().number == state.totalPages(),\r\n    });\r\n  }\r\n\r\n  buttonLast() {\r\n    let state = this.attrs.state;\r\n    return Button.component({\r\n      title: 'Last',\r\n      icon: 'fa fa-angle-double-right',\r\n      className: 'Button Button--icon',\r\n      onclick: () => {\r\n        let page = parseInt(state.totalPages());\r\n        state.ctrl.toPage(page);\r\n      },\r\n      disabled: state.page().number == state.totalPages(),\r\n    });\r\n  }\r\n\r\n  JumpFunc() {\r\n    let state = this.attrs.state;\r\n    let input = parseInt(document.getElementById('pagination-inputJump')?.value);\r\n    if (Number.isFinite(input) && Number.isSafeInteger(input)) {\r\n      if (input != state.page().number) {\r\n        if (1 <= input && input <= state.totalPages()) {\r\n          state.ctrl.toPage(input);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  inputJump() {\r\n    let state = this.attrs.state;\r\n    return m('input.FromControl', {\r\n      id: 'pagination-inputJump',\r\n      placeholder: state.page().number === undefined ? '' : `${state.page().number}`,\r\n      onkeydown: (event: KeyboardEvent) => {\r\n        event.redraw = false;\r\n        if (event.keyCode == 13) {\r\n          event.redraw = true;\r\n          this.JumpFunc();\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  buttonJump() {\r\n    return Button.component({\r\n      title: 'Jump',\r\n      icon: 'fa fa-paper-plane',\r\n      className: 'Button Button--icon',\r\n      onclick: this.JumpFunc.bind(this),\r\n    });\r\n  }\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/common/app';\r\nimport { extend, override } from 'flarum/extend';\r\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\r\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\r\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\r\nimport Placeholder from 'flarum/common/components/Placeholder';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\r\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport classList from 'flarum/common/utils/classList';\r\n\r\nimport addUserPreference from './addUserPreference';\r\nimport determineMode from './determineMode';\r\nimport Toolbar from './components/Toolbar';\r\n\r\napp.initializers.add('foskym/flarum-pagination', () => {\r\n  addUserPreference();\r\n\r\n  DiscussionListState.prototype.initOptions = function () {\r\n    this.options = {\r\n      perPage: app.forum.attribute('foskym-pagination.perPage'),\r\n      perLoadMore: app.forum.attribute('foskym-pagination.perLoadMore'),\r\n      perIndexInit: app.forum.attribute('foskym-pagination.perIndexInit'),\r\n      leftEdges: 4,\r\n      rightEdges: 5,\r\n    };\r\n\r\n    this.usePaginationMode = determineMode();\r\n  };\r\n\r\n  override(DiscussionListState.prototype, 'refresh', function (original, page = 1) {\r\n    this.initOptions();\r\n\r\n    if (!this.usePaginationMode) {\r\n      this.pageSize = this.options.perLoadMore;\r\n      return original(page);\r\n    }\r\n\r\n    this.initialLoading = true;\r\n    this.loadingPrev = false;\r\n    this.loadingNext = false;\r\n\r\n    this.clear();\r\n\r\n    this.location = { page };\r\n\r\n    return this.loadPage(page)\r\n      .then((results) => {\r\n        this.pages = [];\r\n        this.parseResults(this.location.page, results);\r\n      })\r\n      .finally(() => {\r\n        this.initialLoading = false;\r\n      });\r\n  });\r\n\r\n  override(DiscussionListState.prototype, 'loadPage', function (original, page = 1) {\r\n    const reqParams = this.requestParams();\r\n\r\n    const include = Array.isArray(reqParams.include) ? reqParams.include.join(',') : reqParams.include;\r\n\r\n    let newOffset, newLimit;\r\n\r\n    if (this.usePaginationMode) {\r\n      newOffset = this.options.perPage * (page - 1);\r\n      newLimit = this.options.perPage;\r\n    } else {\r\n      newOffset = this.options.perIndexInit * Math.min(page - 1, 1) + this.options.perLoadMore * Math.max(page - 2, 0);\r\n      newLimit = newOffset == 0 ? this.options.perIndexInit : this.options.perLoadMore;\r\n    }\r\n\r\n    const params = {\r\n      ...reqParams,\r\n      page: {\r\n        ...reqParams.page,\r\n        offset: newOffset,\r\n        limit: newLimit,\r\n      },\r\n      include,\r\n    };\r\n\r\n    return app.store.find(this.type, params);\r\n  });\r\n\r\n  override(DiscussionListState.prototype, 'parseResults', function (original, pg, results) {\r\n    if (!this.usePaginationMode) {\r\n      return original(pg, results);\r\n    }\r\n    const pageNum = Number(pg);\r\n\r\n    const links = results.payload?.links || {};\r\n\r\n    const page = {\r\n      number: pageNum,\r\n      items: results,\r\n      hasNext: !!links?.next,\r\n      hasPrev: !!links?.prev,\r\n    };\r\n\r\n    this.hasPage = function (page) {\r\n      let allPages = this.getPages();\r\n      if (allPages.length == 0) return false;\r\n      for (let i = 0; i < allPages.length; i++) {\r\n        if (allPages[i].number == page) return true;\r\n      }\r\n      return false;\r\n    };\r\n\r\n    if (!this.hasPage(pageNum)) {\r\n      this.pages.push(page);\r\n    }\r\n\r\n    this.location = { page: pageNum };\r\n\r\n    this.totalDiscussionCount = Stream(results.payload.jsonapi.totalResultsCount);\r\n\r\n    this.getTotalPages = function () {\r\n      return Math.ceil(this.totalDiscussionCount() / this.options.perPage);\r\n    };\r\n\r\n    this.page = Stream(page);\r\n    this.perPage = Stream(this.options.perPage);\r\n    this.totalPages = Stream(this.getTotalPages());\r\n\r\n    this.ctrl = {\r\n      prevPage: function () {\r\n        let current = this.page().number;\r\n        --current;\r\n\r\n        if (current < 1) {\r\n          return;\r\n        }\r\n\r\n        this.page(current);\r\n        let next = current;\r\n        this.loadingPrev = true;\r\n        this.loadPage(next).then((results) => {\r\n          this.parseResults(next, results);\r\n          this.loadingPrev = false;\r\n        });\r\n      }.bind(this),\r\n\r\n      nextPage: function () {\r\n        let current = this.page().number;\r\n        ++current;\r\n\r\n        if (current > this.totalPages()) {\r\n          current = this.totalPages();\r\n          return;\r\n        }\r\n\r\n        this.page(current);\r\n        let next = current;\r\n        this.loadingNext = true;\r\n        this.loadPage(next).then((results) => {\r\n          this.parseResults(next, results);\r\n          this.loadingNext = false;\r\n        });\r\n      }.bind(this),\r\n\r\n      toPage: function (page) {\r\n        if (this.page().number == Number(page) || page < 1 || page > this.totalPages()) return;\r\n\r\n        this.page(Number(page));\r\n        let next = Number(page);\r\n\r\n        this.initialLoading = true;\r\n\r\n        this.loadPage(next).then((results) => {\r\n          this.parseResults(next, results);\r\n          this.initialLoading = false;\r\n        });\r\n      }.bind(this),\r\n\r\n      pageList: function () {\r\n        let p = [],\r\n          left = Math.max(parseInt(this.page().number) - this.options.leftEdges, 1),\r\n          right = Math.min(parseInt(this.page().number) + this.options.rightEdges, this.totalPages());\r\n\r\n        for (let i = left; i <= right; i++) {\r\n          p.push(i);\r\n        }\r\n\r\n        return p;\r\n      }.bind(this),\r\n    };\r\n\r\n    m.redraw();\r\n  });\r\n\r\n  override(DiscussionListState.prototype, 'addDiscussion', function (original) {\r\n    // if (!this.usePaginationMode) {\r\n    //   return original();\r\n    // }\r\n    // this.totalDiscussionCount(this.totalDiscussionCount() + 1);\r\n    // this.totalPages(this.getTotalPages());\r\n  });\r\n\r\n  override(DiscussionList.prototype, 'view', function (original) {\r\n    const state = this.attrs.state;\r\n\r\n    if (!state.usePaginationMode) {\r\n      return original();\r\n    }\r\n\r\n    const params = state.getParams();\r\n    const isLoading = state.isLoading();\r\n\r\n    if (state.isEmpty()) {\r\n      const text = app.translator.trans('core.forum.discussion_list.empty_text');\r\n      return (\r\n        <div className=\"DiscussionList\">\r\n          <Placeholder text={text} />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (isLoading) {\r\n      return (\r\n        <div className={classList('DiscussionList', { 'DiscussionList--searchResults': state.isSearchResults() })}>\r\n          <ul role=\"feed\" aria-busy={isLoading} className=\"DiscussionList-discussions\"></ul>\r\n          <div className=\"DiscussionList-loadMore\">\r\n            <LoadingIndicator />\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const pages = state.getPages();\r\n    let items = [];\r\n\r\n    for (let index = 0; index < pages.length; index++) {\r\n      const page = pages[index];\r\n      if (page.number == state.location.page) {\r\n        items = page.items;\r\n        break;\r\n      }\r\n    }\r\n\r\n    const controls = Toolbar.component({ state });\r\n    const position = app.forum.attribute('foskym-pagination.paginationPosition');\r\n    const pageSize = state.options.perPage;\r\n    const pageNum = state.page;\r\n\r\n    return (\r\n      <div className={classList('DiscussionList', { 'DiscussionList--searchResults': state.isSearchResults() })}>\r\n        {position == 'above' || position == 'both' ? controls : ''}\r\n        <ul role=\"feed\" aria-busy={isLoading} className=\"DiscussionList-discussions\">\r\n          {items.map((discussion, itemNum) => (\r\n            <li key={discussion.id()} data-id={discussion.id()} role=\"article\" aria-setsize=\"-1\" aria-posinset={pageNum * pageSize + itemNum}>\r\n              <DiscussionListItem discussion={discussion} params={params} />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        {position == 'under' || position == 'both' ? controls : ''}\r\n      </div>\r\n    );\r\n  });\r\n\r\n  extend(DiscussionControls, 'deleteAction', function () {\r\n    if (!this.usePaginationMode) {\r\n      return;\r\n    }\r\n\r\n    if (app.discussions) {\r\n      let page = app.discussions.location.page;\r\n      app.discussions.refresh(page);\r\n    }\r\n  });\r\n\r\n  extend(DiscussionComposer.prototype, 'onsubmit', function () {\r\n    if (!this.usePaginationMode) {\r\n      return;\r\n    }\r\n\r\n    if (app.discussions) {\r\n      // let page = app.discussions.location.page;\r\n      app.discussions.refresh();\r\n    }\r\n  });\r\n});\r\n","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\r\nimport FieldSet from 'flarum/common/components/FieldSet';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport Switch from 'flarum/common/components/Switch';\r\nimport Stream from 'flarum/common/utils/Stream';\r\n\r\nexport default function () {\r\n  extend(SettingsPage.prototype, 'oninit', function () {\r\n    const user = this.user as any;\r\n    const preferences = user.preferences() as any;\r\n    this.userCustom = Stream(preferences['foskym-pagination.userCustom']);\r\n    this.userPaginationOnLoading = Stream(preferences['foskym-pagination.userPaginationOnLoading']);\r\n  });\r\n\r\n  extend(SettingsPage.prototype, 'settingsItems', function (items) {\r\n    if (Boolean(app.forum.attribute('foskym-pagination.canUserPref'))) {\r\n      items.add(\r\n        'pagination_settings',\r\n        FieldSet.component(\r\n          {\r\n            label: app.translator.trans('foskym-pagination.forum.user.settings.head'),\r\n            className: 'SettingsPage-pagination',\r\n          },\r\n          this.Pagination_UserPrefItems().toArray()\r\n        )\r\n      );\r\n    }\r\n  });\r\n\r\n  SettingsPage.prototype['Pagination_UserPrefItems'] = function () {\r\n    const items = new ItemList();\r\n    items.add(\r\n      'foskym-pagination.userCustom',\r\n      Switch.component(\r\n        {\r\n          state: this.user.preferences()['foskym-pagination.userCustom'],\r\n          onchange: (value) => {\r\n            this.UserCustom_Loading = true;\r\n            this.user.savePreferences({ 'foskym-pagination.userCustom': value }).then(() => {\r\n              this.UserCustom_Loading = false;\r\n              m.redraw();\r\n            });\r\n          },\r\n          loading: this.UserCustom_Loading,\r\n        },\r\n        app.translator.trans('foskym-pagination.forum.user.settings.userCustom')\r\n      )\r\n    );\r\n\r\n    if (this.user.preferences()['foskym-pagination.userCustom']) {\r\n      items.add(\r\n        'foskym-pagination.userPaginationOnLoading',\r\n        Switch.component(\r\n          {\r\n            state: this.user.preferences()['foskym-pagination.userPaginationOnLoading'],\r\n            onchange: (value) => {\r\n              this.userPaginationOnLoading_Loading = true;\r\n              this.user.savePreferences({ 'foskym-pagination.userPaginationOnLoading': value }).then(() => {\r\n                this.userPaginationOnLoading_Loading = false;\r\n                m.redraw();\r\n              });\r\n            },\r\n            loading: this.userPaginationOnLoading_Loading,\r\n          },\r\n          app.translator.trans('foskym-pagination.forum.user.settings.userPaginationOnLoading')\r\n        )\r\n      );\r\n    }\r\n\r\n    return items;\r\n  };\r\n}\r\n","import app from 'flarum/forum/app';\r\n\r\nexport default function () {\r\n  if (app.session.user === null) {\r\n    return app.forum.attribute('foskym-pagination.paginationOnLoading');\r\n  }\r\n\r\n  const preferences = app.session.user.preferences() as any;\r\n\r\n  if (app.forum.attribute('foskym-pagination.canUserPref')) {\r\n    if (!preferences['foskym-pagination.userCustom']) {\r\n      return app.forum.attribute('foskym-pagination.paginationOnLoading');\r\n    } else {\r\n      if (!preferences['foskym-pagination.userPaginationOnLoading']) {\r\n        return false;\r\n      }\r\n    }\r\n  } else {\r\n    return app.forum.attribute('foskym-pagination.paginationOnLoading');\r\n  }\r\n\r\n  return true;\r\n}\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_extends","assign","bind","target","i","arguments","length","source","apply","this","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","Toolbar","subClass","superClass","attrs","create","constructor","view","vnode","state","className","class","buttonFirst","buttonBack","ctrl","pageList","map","page","title","number","onclick","toPage","buttonNext","buttonLast","inputJump","buttonJump","Button","icon","disabled","parseInt","totalPages","JumpFunc","input","document","getElementById","Number","isFinite","isSafeInteger","m","id","placeholder","undefined","onkeydown","event","redraw","keyCode","Component","app","extend","SettingsPage","preferences","user","userCustom","Stream","userPaginationOnLoading","items","Boolean","add","FieldSet","label","Pagination_UserPrefItems","toArray","ItemList","Switch","onchange","UserCustom_Loading","savePreferences","then","loading","userPaginationOnLoading_Loading","DiscussionListState","options","perPage","perLoadMore","perIndexInit","leftEdges","rightEdges","usePaginationMode","determineMode","override","original","initOptions","initialLoading","loadingPrev","loadingNext","clear","location","loadPage","results","pages","parseResults","pageSize","newOffset","newLimit","reqParams","requestParams","include","Array","isArray","join","Math","min","max","params","offset","limit","type","pg","pageNum","links","payload","hasNext","next","hasPrev","prev","hasPage","allPages","getPages","push","totalDiscussionCount","jsonapi","totalResultsCount","getTotalPages","ceil","prevPage","current","nextPage","left","right","DiscussionList","getParams","isLoading","isEmpty","text","classList","isSearchResults","role","index","controls","component","position","discussion","itemNum","DiscussionControls","DiscussionComposer"],"sourceRoot":""}